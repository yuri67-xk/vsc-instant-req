# Change Log

## [2.0.0] - 2025-01-09

### 🎉 Major Features

#### カスタムエージェント履歴機能
- **最近使用したエージェントの履歴表示**: カスタムエージェント（`@`で始まる）を一度使用すると、次回から「📌 最近使用」セクションに表示されます
- **自動保存**: プロンプト発行時に自動的に履歴に追加（最新10件を保持）
- **ワークスペース固有**: 各ワークスペースごとに履歴を管理

#### ドロップダウンUI改善
- セクション分けで視認性向上
  - 📌 最近使用
  - 📋 プリセット
  - ✏️ カスタム
- 履歴からの選択で入力の手間を削減

### 🐛 Bug Fixes

#### プレースホルダー置換バグの修正
- **Critical Fix**: `{agent-xxx}`形式のプレースホルダーが正しく置換されない問題を修正
- 要件定義モード・課題探索モードの両方で、選択したエージェントが正しくプロンプトに反映されるようになりました

#### プロンプト生成形式の改善
- ステージごとに番号付きリストとして整理
- トップステージの下に要件/課題をネスト表示
- サブステージを箇条書き形式で統一

**変更前:**
```
1. 要件1
2. 要件2

ステージ1のコンテンツ
ステージ2のコンテンツ
```

**変更後:**
```
1. {トップステージ}
  - 要件1
  - 要件2
2. {ステージ2}
3. {ステージ3}
  - サブステージ1
  - サブステージ2
```

### 🔧 Improvements

#### コード品質向上
- プレースホルダー処理の共通関数化（`replacePlaceholders()`メソッド）
- 重複コードの削減と保守性向上
- TypeScript型定義の強化

### 📚 Technical Details

#### 新規追加ファイル
- `CHANGELOG.md`: バージョン履歴管理

#### 修正ファイル
- `src/types/settings.ts`: 履歴関連の型定義追加
- `src/providers/InstantReqViewProvider.ts`: 履歴の読み込み・保存機能
- `src/webview/components/AgentSelector.ts`: 履歴表示UI
- `src/webview/components/PromptGenerator.ts`: プレースホルダー置換とプロンプト形式の修正
- `src/webview/main.ts`: 履歴保存処理の統合
- `src/webview/utils/vscodeApi.ts`: 履歴保存API追加

---

## [1.0.0] - Initial Release

### Features
- 要件定義モード: 要件からプロンプト生成
- 課題探索モード: 課題からプロンプト生成
- ステージ設定エディタ: プロンプトテンプレートのカスタマイズ
- エージェント選択: 動的エージェント指定機能
- カスタムエージェント入力: 手動でエージェント名を指定可能
